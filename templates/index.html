<!DOCTYPE html>
<html>
<head>
    <title>NDA Signing</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.7/dist/signature_pad.umd.min.js"></script>
</head>
<body>
    <h1>Sign the NDA</h1>
    <div>
        <h2>Non-Disclosure Agreement</h2>
        <pre>{{ nda_text }}</pre> <!-- Display NDA text -->
    </div>
    <form method="POST" action="/" id="nda-form">
        <label>Name: <input type="text" name="name" required></label><br>
        <label>Email: <input type="email" name="email" required></label><br>
        <label>Business: <input type="text" name="business" required></label><br>
        <label>Address: <input type="text" name="address" required></label><br>
        <label>Title: <input type="text" name="title" required></label><br>
        <label>Accept NDA: <input type="checkbox" name="accept" required></label><br>
        <div id="signature-pad" style="border: 1px solid black; width: 400px; height: 200px;">
            <canvas id="signature-canvas" width="400" height="200"></canvas>
        </div>
        <button type="button" id="clear">Clear Signature</button><br>
        <input type="hidden" name="signature" id="signature-data">
        <input type="submit" value="Sign and Submit">
    </form>

    <script>
        var canvas = document.getElementById('signature-canvas');
        var signaturePad = new SignaturePad(canvas);

        window.addEventListener('load', function () {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
        });

        document.getElementById('clear').addEventListener('click', function () {
            signaturePad.clear();
        });

        document.getElementById('nda-form').addEventListener('submit', function (e) {
            if (signaturePad.isEmpty()) {
                alert("Please provide a signature!");
                e.preventDefault();
            } else {
                document.getElementById('signature-data').value = signaturePad.toDataURL('image/png');
                console.log("Signature captured:", document.getElementById('signature-data').value.substring(0, 50));
            }
        });
    </script>
</body>
</html>
